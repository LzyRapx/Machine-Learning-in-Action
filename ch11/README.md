# Ch11 - 使用Apriori算法进行关联分析(Association analysis with the Apriori algorithm)

#### 从大规模数据集中寻找物品间的隐含关系被称作关联分析(association analysis)或者关联规则学习(association rule learning)。 关联分析是一种在大规模数据集中寻找有趣关系的任务。这些关系可以有两种形式：频繁项集或者关联规则。

#### 频繁项集(frequent item sets)是经常出现在一块的物品的集合。
#### 关联规则(association rules)暗示两种物品之间可能存在很强的关系。

#### 一个项集的支持度(support)：被定义为数据集中包含该项集的记录所占的比例。支持度是针对项集来说的，因此可以定义一个最小支持度，而只保留满足最小支持度的项集。

#### 可信度或置信度(confidence)：是针对一条诸如{尿布} ➞ {葡萄酒}的关联规则来定义的。这 条规则的可信度被定义为“支持度({尿布, 葡萄酒})/支持度({尿布})”。从图11-1中可以看到，由 于{尿布, 葡萄酒}的支持度为3/5，尿布的支持度为4/5，所以“尿布 ➞ 葡萄酒”的可信度为3/4=0.75。 这意味着对于包含“尿布”的所有记录，我们的规则对其中75%的记录都适用。（类似条件概率）。

## Apriori 原理：
#### Apriori原理可以帮我们减少可能感兴趣的项集。Apriori原理是说如果某个项集是频繁的，那么它的所有子集也是频繁的。这个原理直观上并没有什么帮助，但是如果反过来看就有用了，也就是说如果一个项集是非频繁集那么它的所有超集也是非频繁的。 


#### 关联分析的目标包括两项：发现频繁项集和发现关联规则。首先需要找到频繁 项集，然后才能获得关联规则。
#### Apriori算法是发现频繁项集的一种方法。该算法首先会生成所有单个物品的项集列表。接着扫描交易记录来查看哪些项集满足最小支持度要求，那些不满足最小支持度的集合会被去掉。然后，对剩下来的集合进行组合以生成包含两个元素的项集。接下来，再重新扫描交易记录，去掉不满足最小支持度的项集。该过程重复进行直到所有项集都被去掉。


## 整个Apriori算法的伪代码如下:
```
当集合中项的个数大于0时:
    构建一个k个项组成的候选项集的列表
    检查数据以确认每个项集都是频繁的
    保留频繁项集并构建k+1项组成的候选项集的列表(向上合并)
```

#### 函数 aprioriGen() 的输入参数为频繁项集列表 Lk 与项集元素个数 k ，输出为 Ck 。举例来说,该函数以{0}、{1}、{2}作为输入，会生成{0,1}、{0,2}以及{1,2}。要完成这一点，首先创建一个空列表,然后计算 Lk 中的元素数目。通过循环来比较 Lk 中的每一个元素与其他元素，紧接着,取列表中的两个集合进行比较。如果这两个集合的前面 k-2 个元素都相等，那么就将这两个集合合成一个大小为 k 的集合 。这里使用集合的并操作来完成。

## 从频繁项集中挖掘关联规则

### 如果某条规则并不满足最小可信度要求，那么该规则的所有子集也不会满足最小可信度要求。可以利用关联规则的这条性质属性来减少需要测试的规则数目。


## 小总结：

#### 关联分析是用于发现大数据集中元素间有趣关系的一个工具集，可以采用两种方式来量化这些有趣的关系。 
#### 第一种方式是使用频繁项集，它会给出经常在一起出现的元素项。 
#### 第二种方式是关联规则，每条关联规则意味着元素项之间的“如果……那么”关系。
#### Apriori的方法简化了计算量，可以在合理的时间范围内找到频繁项集。
#### Apriori原理是说如果一个元素项是不频繁的，那么那些包含该元素的超集也是不频繁的。 
#### Apriori算法从单元素项集开始，通过组合满足最小支持度要求的项集来形成更大的集合。支持度用来度量一个集合在原始数据中出现的频率。
#### 每次增加频繁项集的大小，Apriori算法都会重新扫描整个数据集。当数据集很大时，这会显著降低频繁项集发现的速度。



